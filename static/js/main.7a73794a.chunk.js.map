{"version":3,"sources":["assets/images/user2.jpg","components/common/Paginator/Paginator.module.css","components/Profile/MyPosts/MyPosts.module.css","components/Header/Header.module.css","components/Users/Users.module.css","assets/images/loader2.gif","components/Profile/MyPosts/Post/Post.module.css","components/News/News.jsx","components/Music/Music.jsx","components/Settings/Settings.jsx","redux/dialogs-reducer.ts","components/Dialogs/DialogItem/DialogItem.jsx","components/Dialogs/MessageItem/MessageItem.jsx","components/common/FormsControl/FormsControl.js","utils/validators/validator.js","components/Dialogs/Dialogs.jsx","hoc/withAuthRedirect.js","components/Dialogs/DialogsContainer.jsx","components/Users/User.jsx","components/common/Paginator/Paginator.tsx","components/Users/Users.tsx","components/common/preloader/preloader.js","api/api.js","redux/users-reducer.ts","redux/user-selectors.ts","components/Users/UsersContainer.tsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileStatus.tsx","components/Profile/ProfileInfo/ProfileDataForm.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","redux/profile-reducer.ts","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx","components/Header/Header.jsx","redux/auth-reducer.ts","components/Header/HeaderContainer.jsx","components/login/login.jsx","redux/app-reducer.ts","components/Chat/AddMessage/AddMessage.jsx","components/Chat/Messages/Messages.jsx","components/Chat/Chat.jsx","App.js","serviceWorker.js","redux/redux-store.ts","index.js","components/Dialogs/Dialogs.module.css","components/common/FormsControl/FormsControl.module.css","components/Nav/Nav.module.css","components/Profile/ProfileInfo/ProfileInfo.module.css"],"names":["module","exports","News","Music","Settings","initialState","dialogs","id","name","avatar","messages","message","dialogsReducer","state","action","type","body","newMessageBody","DialogItem","props","path","className","styles","dialog","active","to","src","MessageItem","Textarea","input","meta","hasError","touched","error","formControl","Input","required","value","maxLengthCreator","maxLength","length","max10","MessageFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","validate","placeholder","Dialogs","dialogsPage","dialogsElements","map","d","key","messagesElements","m","isAuth","dialogsItems","values","sendMessage","withAuthRedirect","Component","RedirectComponent","this","React","connect","auth","DialogsContainer","compose","dispatch","sendMessageCreator","User","user","followingInProgress","unfollow","follow","photos","small","userPhoto","followed","disabled","some","onClick","ghost","status","Paginator","totalItemsCount","currentPage","pageSize","onPageChanged","portionsSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setportionNumber","leftPortionPageNunber","rightPortionPageNunber","cn","paginator","filter","p","selectPage","pageNumber","e","Users","totalUsersCount","users","u","Preloader","preloader","instance","axios","withCredentials","baseURL","headers","usersAPI","get","then","response","data","userId","post","delete","console","warn","profileAPI","getProfile","getStatus","updateStatus","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","email","password","rememberMe","captcha","securityAPI","isFetching","followAC","unfollowAC","setCurrentPageAC","toggleIsFetchingAC","toggleFollowingProgressAC","usersReducer","count","getUsers","createSelector","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","getUsersThunk","unfollowThunk","followThunk","a","resultCode","items","totalCount","ProfileStatusWithHooks","editMode","setEditMode","setStatus","useEffect","onDoubleClick","onChange","currentTarget","onBlur","autoFocus","ProfileDataFormRedux","formSummaryError","Object","keys","contacts","style","contact","ProfileData","isOwner","goToEditMode","fullName","lookingForAJob","lookingForAJobDescription","aboutMe","contactTitle","contactValue","Contact","ProfileInfo","discriptionBlock","large","mainPhoto","target","files","initialValues","posts","likesCount","newPostText","getUserProfile","profileReducer","newPost","postId","Post","item","maxLength10","MyPosts","memo","PostsElements","postsBlock","MyPostFormRedux","addPost","MyPostsContainer","profilePage","addPostActionCreator","Profile","ProfileContainer","match","params","authUserId","history","refreshProfile","prevProps","prevState","file","getState","stopSubmit","_error","Promise","reject","withRouter","Header","Layout","span","theme","mode","defaultSelectedKeys","Item","backgroundColor","icon","UserOutlined","loginBlock","login","logout","captchaUrl","setAuthUserData","payload","getCaptchaUrlSuccess","getAuthUserData","getCaptchaUrl","url","authReducer","HeaderContainer","LoginReduxForm","initializated","appReducer","AddMessage","webSocketChannel","setMessage","send","Message","photo","userName","Messages","setMessages","addEventListener","newMessages","JSON","parse","prevMessages","height","overflowY","index","Chat","WebSocket","SubMenu","Menu","Content","Footer","Sider","App","initializeApp","padding","margin","width","defaultOpenKeys","title","LaptopOutlined","minHeight","render","textAlign","app","promise","all","Boolean","window","location","hostname","reducers","combineReducers","formReducer","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.7a73794a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user2.8793711e.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__1l2VB\",\"pageNumber\":\"Paginator_pageNumber__15rEo\",\"selectPage\":\"Paginator_selectPage__38Z97\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"MyPosts_postsBlock__2Cbyl\",\"posts\":\"MyPosts_posts__1wC7d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__-hfIS\",\"loginBlock\":\"Header_loginBlock__DVon8\",\"name\":\"Header_name__2nghL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__fQI4x\",\"loader\":\"Users_loader__1-JxN\"};","module.exports = __webpack_public_path__ + \"static/media/loader2.6fb841a4.gif\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"Post_item__c76Do\"};","import React from 'react';\r\n\r\nconst News = () => {\r\n    \r\n    return (\r\n        <div>\r\n            News\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default News;","import React from 'react';\r\nimport styles from './Music.module.css';\r\n\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>\r\n            Music\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default Music;","import React from 'react';\r\nimport styles from './Settings.module.css';\r\n\r\n\r\nconst Settings = () => {\r\n    return (\r\n        <div>\r\n            Settings\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default Settings;","const SEND_MESSAGE = 'SEND-MESSAGE'\r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\ntype DialogsType = {\r\n    id: number\r\n    name: string\r\n    avatar: string\r\n}\r\ntype MessagesType = {\r\n    id: number\r\n    message: string\r\n}\r\nlet initialState = {\r\n    dialogs: [\r\n        { id: 1, name: 'Dmitriy', avatar: 'https://1avatara.ru/pic/animal/animal0013.jpg'},\r\n        { id: 2, name: 'Andrey', avatar: 'https://1avatara.ru/pic/animal/animal0029.jpg'},\r\n        { id: 3, name: 'Michail', avatar: 'https://1avatara.ru/pic/animal/animal0033.jpg'},\r\n        { id: 4, name: 'Dasha', avatar: 'http://1avatara.ru/pic/animal/animal0024.jpg'}\r\n    ] as Array<DialogsType>,\r\n    messages: [\r\n        { id: 1, message: 'Hello' }\r\n    ] as Array<MessagesType>\r\n}\r\n\r\n\r\nconst dialogsReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n        case SEND_MESSAGE:\r\n            let body = action.newMessageBody\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, { id: 7, message: body }]\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\ntype ActionTypes = SendMessageCreatorActionType\r\n\r\ntype SendMessageCreatorActionType = {\r\n    type: typeof SEND_MESSAGE\r\n    newMessageBody: string\r\n}\r\n\r\nexport const sendMessageCreator = (newMessageBody:string): ActionTypes => {\r\n    return { type: SEND_MESSAGE, newMessageBody}\r\n};\r\n\r\nexport default dialogsReducer;","import React from 'react';\r\nimport styles from './../Dialogs.module.css'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nconst DialogItem = (props) => {\r\n    let path = '/Dialogs/' + props.id\r\n    return (\r\n        <div className={styles.dialog + ' ' + styles.active}>\r\n            <NavLink to={path}><img src={props.avatar}/>{props.name}</NavLink>\r\n        </div>\r\n    )\r\n};\r\n\r\n\r\nexport default DialogItem;","import React from 'react';\r\nimport styles from './../Dialogs.module.css'\r\n\r\nconst MessageItem = (props) => {\r\n    return (\r\n        <div className={styles.dialog}>{props.message}</div>\r\n    )\r\n};\r\n\r\nexport default MessageItem;","import React from 'react';\r\nimport styles from './FormsControl.module.css'\r\n\r\nexport const Textarea = ({ input, meta, ...props }) => {    // НОС для textarea\r\n    const hasError = meta.touched && meta.error\r\n\r\n    return (\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <textarea {...input} {...props} />\r\n            </div>\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}\r\nexport const Input = ({ input, meta, ...props }) => {   \r\nconst hasError = meta.touched && meta.error\r\n\r\n    return (\r\n        <div className={styles.formControl + ' ' + (hasError ? styles.error : '')}>\r\n            <div>\r\n                <input {...input} {...props} />\r\n            </div>\r\n            {hasError && <span>{meta.error}</span>}\r\n        </div>\r\n    )\r\n}","export const required = value => {\r\n    if (value) return undefined;\r\n    return 'Field is required';\r\n}\r\n\r\nexport const maxLengthCreator = (maxLength) => (value) => {\r\n    if (value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n    return undefined;\r\n}","import React from 'react';\r\nimport styles from './Dialogs.module.css'\r\nimport { Redirect } from 'react-router-dom';\r\nimport DialogItem from './DialogItem/DialogItem';\r\nimport MessageItem from './MessageItem/MessageItem';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Textarea } from '../common/FormsControl/FormsControl';\r\nimport { maxLengthCreator, required } from '../../utils/validators/validator';\r\n\r\nconst Dialogs = (props) => {\r\n\r\n    let state = props.dialogsPage;\r\n\r\n    let dialogsElements = state.dialogs.map( (d) => <DialogItem avatar={d.avatar} name={d.name} key={d.id} id={d.id}/>);\r\n    let messagesElements = state.messages.map( (m) => <MessageItem message={m.message} key={m.id}/>);\r\n\r\n    let newMessageBody = state.newMessageBody; \r\n\r\n    let addNewMessage = (values) => {\r\n        props.sendMessage(values.newMessageBody)\r\n    }\r\n\r\n    if (props.isAuth == false) return <Redirect to={'/login'} />\r\n\r\n    return (\r\n        <div className={styles.dialogs}>\r\n            <div className={styles.dialogsItems}>\r\n                {dialogsElements}\r\n            </div>\r\n           \r\n            <div className={styles.messages}>\r\n                <div>{messagesElements}</div>\r\n                <MessageFormRedux onSubmit={addNewMessage}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst max10 = maxLengthCreator(10);\r\n\r\nconst MessageForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field component={Textarea}\r\n                       validate={[required, max10]}\r\n                       name='newMessageBody' \r\n                       placeholder='Enter your message'/>\r\n            </div>\r\n\r\n            <div><button>SEND</button></div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst MessageFormRedux = reduxForm({\r\n    form:'dialogMessageForm'\r\n})(MessageForm)\r\n\r\n\r\nexport default Dialogs;","import React from 'react';\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n    \r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n                if (!this.props.isAuth) return <Redirect to={'/login'} />\r\n                \r\n                return <Component {...this.props} />\r\n        }\r\n    }\r\n    let mapStateToPropsForRedirect = (state) => ({\r\n        isAuth: state.auth.isAuth\r\n    })\r\n    let connectedAuthRedirectComponent = connect (mapStateToPropsForRedirect) (RedirectComponent)\r\n\r\n    return connectedAuthRedirectComponent;\r\n}","import React from 'react';\r\nimport { sendMessageCreator } from '../../redux/dialogs-reducer';\r\nimport Dialogs from './Dialogs';\r\nimport { connect } from 'react-redux'; \r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\n\r\nlet mapStateToProps = (state) => { \r\n    return{\r\n        dialogsPage:state.dialogsPage\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch) => {      \r\n    return{\r\n        sendMessage: (newMessageBody) => {dispatch(sendMessageCreator(newMessageBody))},\r\n    }\r\n}\r\n\r\nlet DialogsContainer = compose (\r\n    connect (mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect  \r\n) (Dialogs)\r\n\r\nexport default DialogsContainer;","import React from 'react';\r\nimport styles from './Users.module.css';\r\nimport userPhoto from '../../assets/images/user2.jpg'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Button } from 'antd';\r\n\r\nlet User = ({user, followingInProgress, unfollow, follow, ...props}) => {\r\n    return ( \r\n        <div>\r\n            {\r\n                    <div key={user.id}>\r\n                        <span>\r\n                            <div>\r\n                                <NavLink to={'/profile/' + user.id}>\r\n                                    <img src={user.photos.small != null ? user.photos.small : userPhoto} className={styles.userPhoto} />\r\n                                </NavLink>\r\n                            </div>\r\n                            <div>\r\n                                {user.followed\r\n                                    ? <Button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {     \r\n                                        unfollow(user.id)\r\n                                    }} type=\"primary\" ghost>unFOllOW</Button>\r\n\r\n                                    : <Button disabled={followingInProgress.some(id => id === user.id)} onClick={() => {\r\n                                        follow(user.id)\r\n                                    }} type=\"primary\" ghost>FOllOW</Button>}\r\n                            </div>\r\n                        </span>\r\n                        <span>\r\n                            <span>\r\n                                <div>{user.name}</div>\r\n                                <div>{user.status}</div>\r\n                            </span>\r\n                            <span>\r\n                                <div>{\"user.location.country\"}</div>\r\n                                <div>{\"user.location.city\"}</div>\r\n                            </span>\r\n                        </span>\r\n                    </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default User;","import React, { useState } from 'react';\r\nimport styles from './Paginator.module.css';\r\nimport cn from 'classnames'\r\n\r\ntype Props = {\r\n    totalItemsCount: number\r\n    currentPage: number \r\n    pageSize: number \r\n    onPageChanged: (pageNumber: number) => void \r\n    portionsSize?: number\r\n}\r\n\r\nconst Paginator: React.FC<Props> = ({totalItemsCount, currentPage, pageSize, onPageChanged, portionsSize=10, ...props}) => {\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize)\r\n\r\n    let pages: Array<number> = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    let portionCount = Math.ceil (pagesCount / portionsSize);  \r\n    let [portionNumber, setportionNumber] = useState(1);\r\n    let leftPortionPageNunber = (portionNumber - 1) * (portionsSize + 1); \r\n    let rightPortionPageNunber = portionNumber * (portionsSize + 1);\r\n\r\n    return (\r\n        <div className={cn(styles.paginator)}>\r\n            {portionNumber > 1 &&\r\n                <button onClick={() => { setportionNumber(portionNumber - 1) }}>PREV</button>\r\n            }\r\n\r\n            {pages\r\n                .filter(p => p >= leftPortionPageNunber && p <= rightPortionPageNunber)\r\n                .map(p => {\r\n                    return <span className={cn({\r\n                        [styles.selectPage]: currentPage === p\r\n                    }, styles.pageNumber)}\r\n                        key={p}\r\n                        onClick={(e) => { onPageChanged(p) }}>{p}</span>\r\n                })}\r\n\r\n            {portionCount > portionNumber &&\r\n                <button onClick={() => { setportionNumber(portionNumber + 1) }}>NEXT</button>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Paginator;","import React from 'react';\r\nimport User from './User';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport { UserType } from '../../types/types';\r\n\r\ntype Props = {\r\n    totalUsersCount: number\r\n    currentPage: number \r\n    pageSize: number \r\n    onPageChanged: (pageNumber: number) => void \r\n    users: Array<UserType>\r\n    followingInProgress: Array<number>\r\n    follow:(userId: number) => void\r\n    unfollow:(userId: number) => void\r\n}\r\n\r\n\r\nlet Users: React.FC<Props> = ({currentPage, totalUsersCount, pageSize, onPageChanged, users,...props}) => {\r\n    return (\r\n        <div>\r\n            <Paginator currentPage={currentPage}\r\n                totalItemsCount={totalUsersCount}\r\n                pageSize={pageSize}\r\n                onPageChanged={onPageChanged} />\r\n            <div>\r\n                {\r\n                    users.map(u => <User user={u}\r\n                        key={u.id}\r\n                        followingInProgress={props.followingInProgress}\r\n                        follow={props.follow}\r\n                        unfollow={props.unfollow} />)\r\n\r\n\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Users;","import React from 'react';\r\nimport preloader from '../../../assets/images/loader2.gif'\r\n\r\nlet Preloader = (props) => {\r\n    return (\r\n        <div>\r\n            <img src={preloader}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;","import * as axios from 'axios';\r\n\r\nconst instance = axios.create(    \r\n    {\r\n        withCredentials: true,\r\n        baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n        headers: {'API-KEY': 'c79fa325-f895-4b38-87f8-be88f765c262'} \r\n    })\r\n\r\nexport const usersAPI = {\r\n    getUsers (currentPage=1, pageSize=10) {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => {                  \r\n                return response.data;\r\n            })\r\n    },\r\n    follow(userId) {\r\n        return instance.post(`follow/${userId}`)\r\n    },\r\n    unfollow(userId) {\r\n        return instance.delete(`follow/${userId}`)\r\n    },\r\n    getProfile(userId) {\r\n        console.warn('Obsolete method')\r\n        return profileAPI.getProfile(userId)\r\n    }\r\n}\r\nexport const profileAPI = {\r\n    getProfile(userId) {\r\n        return instance.get(`profile/` + userId) \r\n    },\r\n    getStatus(userId) {\r\n        return instance.get(`profile/status/` + userId) \r\n    },\r\n    updateStatus(status) {\r\n        return instance.put(`profile/status/`, {status: status} ) \r\n    },\r\n    savePhoto(photoFile) {                  \r\n        const formData = new FormData();\r\n        formData.append('image', photoFile)\r\n\r\n        return instance.put(`profile/photo/`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multypart/form-data'\r\n            }\r\n        } ) \r\n    },\r\n    saveProfile(profile) {                  \r\n        return instance.put(`profile`, profile )\r\n    }\r\n}\r\n\r\nexport const authAPI = {\r\n    me(){\r\n        return instance.get(`auth/me`)\r\n    },\r\n    login(email, password, rememberMe = false, captcha = null){\r\n        return instance.post(`auth/login`, {email, password, rememberMe, captcha})\r\n    },\r\n    logout(){\r\n        return instance.delete(`auth/login`)\r\n    },\r\n}\r\nexport const securityAPI = {\r\n    getCaptchaUrl(){\r\n        return instance.get(`security/get-captcha-url`)\r\n    }\r\n}\r\n\r\n\r\n\r\n","import { AppStateType } from './redux-store';\r\nimport { UserType } from './../types/types';\r\nimport { usersAPI } from \"../api/api\";\r\nimport { ThunkAction } from 'redux-thunk';\r\n\r\nconst FOLLOW ='FOLLOW';                             \r\nconst UNFOLLOW = 'UNFOLLOW';\r\nconst SET_USERS = 'SET-USERS';\r\nconst SET_CURRENT_PAGE = 'SET-CURRENT-PAGE';\r\nconst SET_TOTAL_USERS_COUNT = 'SET-TOTAL-USERS-COUNT';\r\nconst TOGGLE_IS_FETCHING = 'TOGGLE-IS-FETCHING';\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS = 'TOGGLE-IS-FOLLOWING-PROGRESS';\r\n\r\n\r\nlet initialState = {                     \r\n    users: [] as Array<UserType>,\r\n    pageSize: 10,\r\n    totalUsersCount: 1000,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: [] as Array<number> // array of users ids\r\n}\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nconst usersReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case FOLLOW:\r\n            return {\r\n                ...state,                         \r\n                 users: state.users.map( u => {                  \r\n                    if(u.id===action.userId){\r\n                        return {...u, followed: true}\r\n                     }\r\n                    return u\r\n                } )    \r\n            }\r\n        case UNFOLLOW:\r\n            return {\r\n                ...state,                          \r\n                users: state.users.map( u => {                  \r\n                    if(u.id===action.userId){\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u\r\n                } )    \r\n            }\r\n        case SET_USERS:\r\n            return {...state, users: action.users}\r\n        case SET_CURRENT_PAGE:\r\n            return {...state, currentPage: action.currentPage}\r\n        case SET_TOTAL_USERS_COUNT:\r\n            return {...state, totalUsersCount: action.count}\r\n        case TOGGLE_IS_FETCHING:\r\n            return {...state, isFetching: action.isFetching}\r\n        case TOGGLE_IS_FOLLOWING_PROGRESS:\r\n            return {\r\n                ...state,\r\n                 followingInProgress: action.isFetching\r\n                  ? [...state.followingInProgress, action.userId]\r\n                  : state.followingInProgress.filter(id => id !== action.userId)\r\n                }\r\n        default:\r\n            return state;\r\n    }\r\n    \r\n}\r\n\r\ntype ActionTypes = FollowActionCreatorType | UnFollowActionCreatorType | SetUsersActionCreatorType | SetCurrentPageActionCreatorType |\r\n    SetTotalUsersCountActionCreatorType | ToggleIsFetchingActionCreatorType | ToggleFollowingProgressActionCreatorType\r\n\r\n\r\ntype FollowActionCreatorType = {\r\n    type: typeof FOLLOW\r\n    userId: number\r\n}\r\nexport const followAC = (userId: number): FollowActionCreatorType => { return { type: FOLLOW, userId } }\r\n\r\ntype UnFollowActionCreatorType = {\r\n    type: typeof UNFOLLOW\r\n    userId: number\r\n}\r\nexport const unfollowAC = (userId: number): UnFollowActionCreatorType => { return {type: UNFOLLOW, userId } }\r\n\r\ntype SetUsersActionCreatorType = {\r\n    type: typeof SET_USERS\r\n    users: Array<UserType>\r\n}\r\nexport const setUsersAC = (users: Array<UserType>):SetUsersActionCreatorType => { return {type: SET_USERS, users } }\r\n\r\ntype SetCurrentPageActionCreatorType = {\r\n    type: typeof SET_CURRENT_PAGE\r\n    currentPage: number\r\n}\r\nexport const setCurrentPageAC = (currentPage: number):SetCurrentPageActionCreatorType => { return {type: SET_CURRENT_PAGE, currentPage } }\r\n\r\ntype SetTotalUsersCountActionCreatorType = {\r\n    type: typeof SET_TOTAL_USERS_COUNT\r\n    count: number\r\n}\r\nexport const setTotalUsersCountAC = (totalUsersCount: number):SetTotalUsersCountActionCreatorType => { return {type: SET_TOTAL_USERS_COUNT, count: totalUsersCount} }\r\n\r\ntype ToggleIsFetchingActionCreatorType = {\r\n    type: typeof TOGGLE_IS_FETCHING\r\n    isFetching: boolean\r\n}\r\nexport const toggleIsFetchingAC = (isFetching: boolean): ToggleIsFetchingActionCreatorType => { return {type: TOGGLE_IS_FETCHING, isFetching} }\r\n\r\ntype ToggleFollowingProgressActionCreatorType = {\r\n    type: typeof TOGGLE_IS_FOLLOWING_PROGRESS\r\n    isFetching: boolean\r\n    userId: number\r\n}\r\nexport const toggleFollowingProgressAC = (isFetching: boolean, userId: number):ToggleFollowingProgressActionCreatorType => { return {type: TOGGLE_IS_FOLLOWING_PROGRESS, isFetching, userId} }\r\n\r\n\r\ntype ThunkType = ThunkAction <Promise<void>, AppStateType, unknown, ActionTypes>\r\n\r\nexport const getUsersThunk = (currentPage: number, pageSize: number): ThunkType => {                \r\n    return async (dispatch) => {     \r\n        dispatch(toggleIsFetchingAC(true));\r\n        dispatch(setCurrentPageAC(currentPage));\r\n\r\n        let data = await usersAPI.getUsers(currentPage, pageSize)   \r\n            dispatch(toggleIsFetchingAC(false))\r\n            dispatch(setUsersAC(data.items))\r\n            dispatch (setTotalUsersCountAC (data.totalCount))\r\n    }\r\n}\r\nexport const followThunk = (userId: number):ThunkType => async (dispatch) => {\r\n    dispatch(toggleFollowingProgressAC(true, userId))\r\n\r\n    let response = await usersAPI.follow(userId)\r\n    if (response.data.resultCode == 0) {\r\n        dispatch(followAC(userId))\r\n    }\r\n    dispatch(toggleFollowingProgressAC(false, userId))\r\n}\r\nexport const unfollowThunk = (userId: number): ThunkType => async (dispatch) => {\r\n    dispatch(toggleFollowingProgressAC(true, userId))\r\n\r\n    let response = await usersAPI.unfollow(userId)\r\n    if (response.data.resultCode == 0) {\r\n        dispatch(unfollowAC(userId))\r\n    }\r\n    dispatch(toggleFollowingProgressAC(false, userId))\r\n}\r\n\r\nexport default usersReducer;","import { AppStateType } from './redux-store';\r\nimport { createSelector } from \"reselect\"\r\n\r\nexport const getUsersSimpleSelector = (state: AppStateType) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSimpleSelector, (users)=> {\r\n    return users.filter(u => true)\r\n})\r\n\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport Users from './Users';\r\nimport Preloader from '../common/preloader/preloader';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { getUsersThunk, followThunk, unfollowThunk} from '../../redux/users-reducer';\r\nimport { getPageSize, getTotalUsersCount,getCurrentPage,getIsFetching,getFollowingInProgress, getUsers } from '../../redux/user-selectors';\r\nimport { UserType } from '../../types/types';\r\nimport { AppStateType } from '../../redux/redux-store';\r\n\r\ntype MapDispatchPropsType = {\r\n    followThunk:(userId: number) => void\r\n    unfollowThunk:(userId: number) => void\r\n    getUsersThunk: (currentPage: number, pageSize: number) => void\r\n}\r\ntype MapStatePropsType = {\r\n    currentPage: number\r\n    pageSize: number\r\n    isFetching: boolean\r\n    totalUsersCount: number\r\n    followingInProgress: Array<number>\r\n    users: Array<UserType>\r\n}\r\ntype Props = MapDispatchPropsType & MapStatePropsType\r\n\r\nclass UsersContainer extends React.Component<Props> {\r\n    componentDidMount() {              \r\n        this.props.getUsersThunk(this.props.currentPage, this.props.pageSize)  \r\n    }\r\n    onPageChanged = (pageNumber: number) => {\r\n        this.props.getUsersThunk(pageNumber , this.props.pageSize)\r\n    }\r\n    render() {                                           \r\n        return <> \r\n            {this.props.isFetching ? <Preloader /> : null}           \r\n            <Users totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                currentPage={this.props.currentPage}\r\n                users={this.props.users}\r\n                onPageChanged={this.onPageChanged}\r\n                unfollow={this.props.unfollowThunk}\r\n                follow={this.props.followThunk}\r\n                followingInProgress={this.props.followingInProgress} />\r\n        </>\r\n    }\r\n}\r\n\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        users: getUsers(state),            \r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n\r\n\r\nexport default compose (\r\n    withAuthRedirect,\r\n    connect (mapStateToProps, { followThunk, unfollowThunk, getUsersThunk }),             \r\n) (UsersContainer)\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './ProfileInfo.module.css';\r\n\r\nconst ProfileStatusWithHooks = (props) => {\r\n\r\n    let [editMode, setEditMode] = useState(false)\r\n    let [status, setStatus] = useState(props.status)\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status])\r\n\r\n    let activeEditMode = () => {\r\n        setEditMode(true)\r\n    } \r\n    let deActiveEditMode  = () => {\r\n        setEditMode(false)\r\n        props.updateStatus(status)               \r\n    }\r\n    let onStatusChange = (e) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            {!editMode &&\r\n                <div>\r\n                    <b>Status:</b><span onDoubleClick={activeEditMode}>{props.status || 'No status'}</span>\r\n                </div>\r\n            }\r\n            {editMode &&\r\n                <div>\r\n                    <input onChange={onStatusChange} onBlur={deActiveEditMode} autoFocus={true}\r\n                           value={status} />\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileStatusWithHooks;","import React, { ChangeEvent } from 'react';\r\n\r\ntype PropsType = {\r\n    status: string\r\n    updateStatus: (status: string) => void\r\n}\r\ntype StateType = {\r\n    editMode: boolean\r\n    status: string\r\n}\r\n\r\nclass ProfileStatus extends React.Component<PropsType, StateType> {\r\n    state = {\r\n        editMode: false,\r\n        status: this.props.status\r\n    }\r\n\r\n    activeEditMode = () => {\r\n        this.setState({editMode:true})               \r\n    }\r\n    deActiveEditMode  = () => {\r\n        this.setState({editMode:false})\r\n        this.props.updateStatus(this.state.status)               \r\n    }\r\n    onStatusChange = (e:ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            status: e.currentTarget.value         \r\n        })\r\n    }\r\n    componentDidUpdate (prevProps: PropsType, prevState: StateType) {\r\n        if(prevProps.status !== this.props.status) {   \r\n            this.setState({\r\n                status:this.props.status\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {!this.state.editMode &&        \r\n                    <div>\r\n                        <span onDoubleClick={this.activeEditMode}>{this.state.status || 'No status'}</span>\r\n                    </div>\r\n                }\r\n                {this.state.editMode &&\r\n                    <div>\r\n                        <input onChange={this.onStatusChange} autoFocus={true} onBlur={this.deActiveEditMode}  value={this.state.status}  />\r\n                    </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProfileStatus;","import React from 'react';\r\nimport style from './ProfileInfo.module.css';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Input, Textarea } from '../../common/FormsControl/FormsControl';\r\nimport styles from './../../common/FormsControl/FormsControl.module.css'\r\n\r\nconst ProfileDataForm = ({ handleSubmit, profile, error }) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div><button>save</button></div>\r\n            {error &&\r\n                <div className={styles.formSummaryError}>\r\n                    {error}\r\n                </div>}\r\n            <div>\r\n                <b>Full name:</b> <Field placeholder={'Name'} name={'fullName'} component={Input} />\r\n            </div>\r\n            <div>\r\n                <b>Looking for a JOB:</b> <Field name={'lookingForAJob'} component={Input} type={'checkbox'} />\r\n            </div>\r\n            <div>\r\n                <b>My proffesional skills:</b> <Field placeholder={'My proffesional skills'} name={'lookingForAJobDescription'} component={Textarea} />\r\n            </div>\r\n            <div>\r\n                <b>About me:</b> <Field placeholder={'About me'} name={'aboutMe'} component={Textarea} />\r\n            </div>\r\n            <div>\r\n                <b>Contacts:</b> {Object.keys(profile.contacts).map(key => {\r\n                    return <div key={key} className={style.contact}>\r\n                        <b>{key}:<Field placeholder={key} name={'contacts.' + key} component={Input} /></b>\r\n                    </div>\r\n                })}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\n export const ProfileDataFormRedux = reduxForm ({\r\n    form: 'editProfile'\r\n}) (ProfileDataForm)\r\n\r\n","import React, { useState } from 'react';\r\nimport style from './ProfileInfo.module.css';\r\nimport Preloader from '../../common/preloader/preloader';\r\nimport ProfileStatus from './ProfileStatus';\r\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks';\r\nimport userPhoto from '../../../assets/images/user2.jpg'\r\nimport { ProfileDataFormRedux } from './ProfileDataForm';\r\n\r\nconst ProfileInfo = ({profile,status,updateStatus,isOwner,saveProfile, ...props}) => {\r\n\r\n    let [editMode, setEditMode] = useState(false)\r\n\r\n    if(!profile){\r\n        return <Preloader />\r\n    }\r\n    const onMainPhotoSelected = (e) => {\r\n        if(e.target.files.length) {\r\n            props.savePhoto(e.target.files[0])\r\n        }\r\n    }\r\n    const onSubmit = (formData) =>{\r\n        saveProfile(formData).then(()=>{\r\n            setEditMode(false)\r\n        })\r\n     }\r\n\r\n    return (\r\n        <div >\r\n            <div className={style.discriptionBlock}>\r\n                <img src={profile.photos.large || userPhoto} className={style.mainPhoto} />\r\n                {isOwner && <input type={'file'} onChange={onMainPhotoSelected} />}\r\n\r\n                {editMode\r\n                    ? <ProfileDataFormRedux initialValues={profile} profile={profile} onSubmit={onSubmit}/>\r\n                    : <ProfileData goToEditMode={()=> {setEditMode(true)}} \r\n                                   profile={profile} \r\n                                   isOwner={isOwner}/>}\r\n\r\n                <ProfileStatusWithHooks status={status}\r\n                    updateStatus={updateStatus} />\r\n            </div>\r\n        </div>\r\n    )\r\n}   \r\n\r\nconst ProfileData = ({ profile, isOwner, goToEditMode }) => {\r\n    return (\r\n        <div>\r\n            {isOwner && <div><button onClick={goToEditMode}>edit</button></div>}\r\n            <div>\r\n                <b>Full name:</b> {profile.fullName}\r\n            </div>\r\n            <div>\r\n                <b>Looking for a JOB:</b> {profile.lookingForAJob ? 'YES' : 'NO'}\r\n            </div>\r\n            {profile.lookingForAJob &&\r\n                <div>\r\n                    <b>My proffesional skills:</b> {profile.lookingForAJobDescription}\r\n                </div>\r\n            }\r\n            <div>\r\n                <b>About me:</b> {profile.aboutMe}\r\n            </div>\r\n            <div>\r\n                <b>Contacts:</b> {Object.keys(profile.contacts).map(key => {\r\n                    return <Contact key={key} contactTitle={key} contactValue={profile.contacts[key]} />\r\n                })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst Contact = ({ contactTitle, contactValue }) => {\r\n    return <div className={style.contact}> <b>{contactTitle}:</b> {contactValue}</div>\r\n}\r\nexport default ProfileInfo;","import { AppStateType } from './redux-store';\r\nimport { PostsType, ProfileType, PhotosType } from './../types/types';\r\nimport { stopSubmit } from \"redux-form\";\r\nimport { profileAPI, usersAPI } from \"../api/api\";\r\nimport { ThunkAction } from 'redux-thunk';\r\n\r\nconst ADD_POST ='ADD-POST';                             \r\nconst SET_USER_PROFILE = 'SET-USER-PROFILE';\r\nconst SET_STATUS = 'SET-STATUS';\r\nconst DELETE_POST = 'DELETE-POST'\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE-PHOTO-SUCCESS'\r\n\r\n\r\nlet initialState = {                     \r\n    posts: [\r\n        { id: 1, message: 'Hello', likesCount: 12 },\r\n        { id: 2, message: 'Hi', likesCount: 32 },\r\n        { id: 3, message: 'How are you?', likesCount: 23 }\r\n    ] as Array<PostsType>,\r\n    newPostText: \"\" as string | null,\r\n    profile: null as ProfileType | null,\r\n    status: \"\"\r\n}\r\nexport type InitialStateType = typeof initialState\r\n\r\nconst profileReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case ADD_POST:{\r\n            let newPost = {\r\n                id: 7,\r\n                message: action.newPostText,\r\n                likesCount: 0\r\n            };\r\n            return{\r\n                ...state,\r\n                posts:[...state.posts, newPost],\r\n                newPostText: ''\r\n            }              \r\n        }\r\n        case SET_USER_PROFILE :{\r\n            return{\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n        case SET_STATUS :{\r\n            return{\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case DELETE_POST :{\r\n            return{\r\n                ...state,\r\n                posts: state.posts.filter(p => p.id != action.postId)\r\n            }\r\n        }\r\n        case SAVE_PHOTO_SUCCESS :{\r\n            return{\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos} as ProfileType\r\n            }\r\n        }\r\n        default:\r\n            return state;\r\n\r\n    }\r\n}\r\ntype ActionTypes = AddPostActionType | SetUserProfileActionType | SetStatusActionType | DeletePostActionType | SavePhotoSuccessActionType  \r\n\r\ntype AddPostActionType = {\r\n    type: typeof ADD_POST\r\n    newPostText: string\r\n}\r\nexport const addPostActionCreator = (newPostText:string):AddPostActionType => {\r\n    return { type: ADD_POST, newPostText }\r\n}\r\n\r\ntype SetUserProfileActionType = {\r\n    type: typeof SET_USER_PROFILE\r\n    profile: ProfileType\r\n}\r\nexport const setUserProfile = (profile: ProfileType): SetUserProfileActionType => {\r\n    return { type: SET_USER_PROFILE, profile }\r\n}\r\n\r\ntype SetStatusActionType = {\r\n    type: typeof SET_STATUS\r\n    status: string\r\n}\r\nexport const setStatus = (status: string): SetStatusActionType => {\r\n    return { type: SET_STATUS, status }\r\n}\r\n\r\ntype DeletePostActionType = {\r\n    type: typeof DELETE_POST\r\n    postId: number\r\n}\r\nexport const deletePost = (postId: number): DeletePostActionType => {\r\n    return { type: DELETE_POST, postId }\r\n}\r\n\r\ntype SavePhotoSuccessActionType = {\r\n    type: typeof SAVE_PHOTO_SUCCESS\r\n    photos: PhotosType\r\n}\r\nexport const savePhotoSuccess = (photos: PhotosType): SavePhotoSuccessActionType => {\r\n    return { type: SAVE_PHOTO_SUCCESS, photos }\r\n}\r\n\r\ntype ThunkType = ThunkAction <Promise<void>, AppStateType, unknown, ActionTypes>\r\n\r\nexport const getUserProfile = (userId: number): ThunkType => async (dispatch) => {             \r\n    let response = await usersAPI.getProfile(userId)            \r\n    \r\n    dispatch (setUserProfile(response.data)) \r\n}\r\nexport const getStatus = (userId: number): ThunkType => async (dispatch) => {         \r\n    let response = await profileAPI.getStatus(userId)   \r\n             \r\n    dispatch (setStatus(response.data))\r\n}\r\nexport const updateStatus = (status: string): ThunkType => async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(status);\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(setStatus(status))\r\n        }\r\n};\r\nexport const savePhoto = (file: any): ThunkType => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file);\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(savePhotoSuccess(response.data.data.photos))\r\n        }\r\n}\r\nexport const saveProfile = (profile: ProfileType) => async (dispatch: any, getState: any) => {\r\n    const userId = getState().auth.id\r\n    const response = await profileAPI.saveProfile(profile)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getUserProfile(userId))\r\n    } else {\r\n        dispatch(stopSubmit('editProfile', {_error:response.data.messages[0]}))\r\n        return Promise.reject(response.data.messages[0])\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import React from 'react';\r\nimport styles from './Post.module.css';\r\n\r\nconst Post = (props) => {\r\n    return (\r\n        <div className={styles.item}>\r\n            <div>\r\n                <span>{props.likesCount}</span>\r\n            </div>\r\n            <div>\r\n                <img src='https://avatars.mds.yandex.net/get-pdb/1655359/523fff70-896c-4166-b041-161e1b53dce8/s1200?webp=false' />\r\n                {props.message}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default Post; ","import React from 'react';\r\nimport styles from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { required, maxLengthCreator } from '../../../utils/validators/validator';\r\nimport { Textarea } from '../../common/FormsControl/FormsControl';\r\n\r\nlet maxLength10 = maxLengthCreator(10);\r\n\r\nconst MyPosts = React.memo( (props) => {\r\n\r\n    let PostsElements = props.posts\r\n    .map( p => <Post key={p.id} message={p.message} likesCount={'LIKE',p.likesCount}/>)\r\n\r\n    let onAddPost = (values) => {\r\n        props.addPost(values.newPostText)\r\n    }\r\n   \r\n    return (\r\n        <div className={styles.postsBlock}>\r\n            <h3>My post</h3>\r\n            <MyPostFormRedux onSubmit={onAddPost}/>\r\n            <div className={styles.posts}>\r\n\r\n                {PostsElements}\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n})\r\n\r\nconst MyPostForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field component={Textarea} \r\n                       placeholder='Post message'\r\n                       name='newPostText' \r\n                       validate={[required, maxLength10]}/>            \r\n            </div>\r\n            <div>\r\n                <button>POST</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nconst MyPostFormRedux = reduxForm({\r\n    form: 'profileAddNewPostForm'\r\n}) (MyPostForm)\r\n\r\nexport default MyPosts;","import React from 'react';\r\nimport { addPostActionCreator } from '../../../redux/profile-reducer';\r\nimport MyPosts from './MyPosts';\r\nimport { connect } from 'react-redux';\r\n\r\nlet mapStateToProps = (state) => {\r\n    return{\r\n        posts: state.profilePage.posts,\r\n        newPostText: state.profilePage.newPostText\r\n    }\r\n}\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return{\r\n        addPost: (newPostText) => {\r\n            dispatch( addPostActionCreator(newPostText))   \r\n        }\r\n    }\r\n}\r\nconst MyPostsContainer = connect (mapStateToProps, mapDispatchToProps) (MyPosts);\r\n\r\nexport default MyPostsContainer;","import React from 'react';\r\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\r\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\r\n\r\nconst Profile = (props) => {\r\n    return (\r\n        <div>\r\n            <ProfileInfo profile={props.profile}\r\n                isOwner={props.isOwner}\r\n                status={props.status}\r\n                updateStatus={props.updateStatus}\r\n                savePhoto={props.savePhoto}\r\n                saveProfile={props.saveProfile} />\r\n            <MyPostsContainer />\r\n        </div>\r\n    )\r\n}\r\nexport default Profile;","import React from 'react';\r\nimport Profile from './Profile';\r\nimport { connect } from 'react-redux';\r\nimport { getUserProfile, getStatus, updateStatus, savePhoto, saveProfile } from '../../redux/profile-reducer'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withAuthRedirect } from '../../hoc/withAuthRedirect';\r\nimport { compose } from 'redux';\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    refreshProfile() {\r\n        let userId = this.props.match.params.userId                   \r\n        if (!userId) {\r\n            userId = this.props.authUserId\r\n            if (!userId) {\r\n               this.props.history.push('./login')\r\n            }\r\n        }\r\n        this.props.getUserProfile(userId)             \r\n        this.props.getStatus(userId)\r\n    }\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <Profile {...this.props}\r\n                profile={this.props.profile}\r\n                isOwner={!this.props.match.params.userId}           \r\n                status={this.props.status}\r\n                updateStatus={this.props.updateStatus}\r\n                savePhoto={this.props.savePhoto} />              \r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authUserId: state.auth.id,\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default compose (\r\n    connect (mapStateToProps, {getUserProfile, getStatus, updateStatus, savePhoto, saveProfile}),\r\n    withRouter,\r\n    withAuthRedirect         \r\n) (ProfileContainer)    ","import React from 'react';\r\nimport styles from'./Header.module.css';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { Layout, Menu, Avatar, Row, Col, Button } from 'antd';\r\nimport { UserOutlined} from '@ant-design/icons';\r\n\r\nconst Header = (props) => {\r\n    const { Header } = Layout;\r\n    return (\r\n        <Header className=\"header\">\r\n            <div className=\"logo\" />\r\n            <Row>\r\n                <Col span={20}>\r\n                    <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys={['2']}>\r\n                        <Menu.Item key=\"1\"><NavLink to='/users'>Users</NavLink></Menu.Item>\r\n                    </Menu>\r\n                </Col>\r\n                <Col span={4}>\r\n                    <Avatar style={{ backgroundColor: '#87d068' }} icon={<UserOutlined />} />\r\n                    <div className={styles.loginBlock}>\r\n                        {props.isAuth\r\n                            ? <div className={styles.name}>{props.login} - <Button type=\"primary\" onClick={props.logout}>Log out</Button></div>\r\n                            : <NavLink to={'/login'}>Login</NavLink>}\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </Header>\r\n    )\r\n}\r\nexport default Header;","import { AppStateType } from './redux-store';\r\nimport { stopSubmit } from \"redux-form\"\r\nimport { ThunkAction } from \"redux-thunk\"\r\nimport { authAPI, securityAPI } from \"../api/api\"\r\n\r\nconst SET_USER_DATA ='SET-USER-DATA'                             \r\nconst GET_CAPTCHA_URL_SUCCESS ='GET-CAPTCHA-URL-SUCCESS'                             \r\n\r\nexport type InitialStateType = typeof initialState\r\n\r\nlet initialState = {  \r\n    id: null as number | null,                   \r\n    email: null as string | null,\r\n    login: null as string | null,\r\n    isAuth: false as boolean,\r\n    captchaUrl: null as string | null\r\n}\r\n\r\n\r\nconst authReducer = (state = initialState, action: ActionTypes): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n    \r\n}\r\ntype ActionTypes = SetAuthUserDataActionType | GetCaptchaUrlSuccessActionType\r\n\r\ntype SetAuthUserDataActionPayloadType = {\r\n    id: number | null \r\n    email: string | null \r\n    login: string | null  \r\n    isAuth: boolean\r\n}\r\ntype SetAuthUserDataActionType = {\r\n    type: typeof SET_USER_DATA\r\n    payload: SetAuthUserDataActionPayloadType\r\n}\r\nexport const setAuthUserData = (id: number | null, email: string | null , login: string | null , isAuth: boolean): SetAuthUserDataActionType => {\r\n    return { type: SET_USER_DATA, payload: { id, email, login, isAuth } }\r\n}\r\n\r\n\r\ntype GetCaptchaUrlSuccessActionType = {\r\n    type: typeof GET_CAPTCHA_URL_SUCCESS\r\n    payload: { captchaUrl: string }\r\n}\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string):GetCaptchaUrlSuccessActionType => {\r\n    return { type: GET_CAPTCHA_URL_SUCCESS, payload: {captchaUrl} }\r\n}\r\n\r\n\r\ntype ThunkTypes = ThunkAction <Promise<void>, AppStateType, unknown, ActionTypes>\r\n\r\nexport const getAuthUserData = ():ThunkTypes => async (dispatch) => {\r\n    let response = await authAPI.me()                        \r\n       \r\n        if (response.data.resultCode === 0) {\r\n            let {id, email, login} = response.data.data\r\n            dispatch (setAuthUserData(id, email, login, true) )   \r\n        }\r\n}\r\nexport const login = (email:string, password: string, rememberMe: boolean, captcha: string) => async (dispatch: any) => {\r\n    let response = await authAPI.login(email, password, rememberMe, captcha);\r\n                            \r\n        if (response.data.resultCode === 0) {\r\n            dispatch(getAuthUserData())      \r\n        } else {\r\n            if(response.data.resultCode === 10) {\r\n                dispatch(getCaptchaUrl())\r\n            }\r\n            let message = response.data.messages.length > 0 ? response.data.messages[0] : 'some ERROR'; \r\n            dispatch(stopSubmit('login', {_error: message}))    \r\n        }\r\n};\r\nexport const getCaptchaUrl = (): ThunkTypes => async (dispatch) => {\r\n    const response = await securityAPI.getCaptchaUrl();\r\n    const captchaUrl = response.data.url\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport const logout = (): ThunkTypes => async(dispatch) => {\r\n    const response = await authAPI.logout();                  \r\n        if (response.data.resultCode === 0) {\r\n            dispatch(setAuthUserData(null, null, null, false))      \r\n        }\r\n}\r\nexport default authReducer;","import React from 'react';\r\nimport Header from './Header';\r\nimport { connect } from 'react-redux';\r\nimport { logout } from '../../redux/auth-reducer'\r\n\r\n\r\nclass HeaderContainer extends React.Component {\r\n    render() {\r\n        return <Header {...this.props} />\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state)=> ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n})\r\n\r\nexport default connect (mapStateToProps, {logout}) (HeaderContainer)","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { required } from '../../utils/validators/validator';\r\nimport { Input } from '../common/FormsControl/FormsControl';\r\nimport { connect } from 'react-redux';\r\nimport { login } from '../../redux/auth-reducer'\r\nimport { Redirect } from 'react-router-dom';\r\nimport styles from './../common/FormsControl/FormsControl.module.css'\r\n\r\n\r\nconst LoginForm = ({handleSubmit, error, captchaUrl}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field placeholder={'Email'} name={'email'} component={Input}\r\n                       validate={[required]}/>     \r\n            </div>\r\n            <div>\r\n                <Field placeholder={'Password'} name={'password'} component={Input} type={'password'}\r\n                       validate={[required]}/>\r\n            </div>\r\n            <div>\r\n                <Field type={'checkbox'} name={'rememberMe'} component={Input}\r\n                       validate={[required]}/> remember me\r\n            </div>\r\n\r\n            {captchaUrl && <img src={captchaUrl}/>}\r\n            {captchaUrl && <Field name={'captcha'} component={Input}  validate={[required]}/>}\r\n\r\n            {error &&                                         \r\n                <div className={styles.formSummaryError}>\r\n                    {error}\r\n                </div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm ({         \r\n    form: 'login'\r\n}) (LoginForm)\r\n\r\nconst Login = (props) => {\r\n    const onSubmit = (formData) =>{\r\n       props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n    }\r\n\r\n    if(props.isAuth){\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>LOGIN</h1>\r\n            <LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl}/>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = (state) =>({\r\n    captchaUrl: state.auth.captchaUrl,\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default connect (mapStateToProps, {login}) (Login);   ","import { getAuthUserData } from \"./auth-reducer\";\r\n\r\nconst SET_INITIALIZATED ='SET-INITIALIZATED';                             \r\n\r\nexport type InitialStateType = {\r\n    initializated: boolean\r\n}\r\n\r\nlet initialState: InitialStateType = {  \r\n    initializated: false\r\n}\r\n\r\n\r\nconst appReducer = (state = initialState, action: any): InitialStateType => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZATED:\r\n            return {\r\n                ...state,\r\n                initializated: true\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n    \r\n}\r\n\r\ntype InitializatedSuccessActionType = {\r\n    type: typeof SET_INITIALIZATED\r\n}\r\n\r\nexport const initializatedSuccess = ():InitializatedSuccessActionType => { return {type: SET_INITIALIZATED}};\r\n\r\n\r\nexport const initializeApp = () => (dispatch: any) => {\r\n    let promise = dispatch(getAuthUserData())\r\n    \r\n    Promise.all([promise])\r\n    .then(() => {\r\n        dispatch(initializatedSuccess())\r\n    })\r\n\r\n};\r\n\r\n\r\nexport default appReducer","import React, { useState } from 'react';\r\n\r\nconst AddMessage = ({webSocketChannel}) => {\r\n\r\n    const [message, setMessage] = useState('')\r\n\r\n    const sendMessage = () =>{\r\n        if(!message) {\r\n            return\r\n        }\r\n        webSocketChannel.send(message)\r\n        setMessage('')\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <textarea onChange={(e)=>setMessage(e.currentTarget.value)} value={message}></textarea>\r\n            </div>\r\n            <div>\r\n                <button onClick={sendMessage}>Send</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddMessage","import React, { useEffect, useState } from 'react';\r\n\r\nconst Messages = ({webSocketChannel}) => {\r\n\r\n    const [messages, setMessages] = useState([])\r\n\r\n    useEffect(()=>{\r\n        webSocketChannel.addEventListener('message', (e)=>{\r\n            const newMessages = JSON.parse(e.data)\r\n            setMessages((prevMessages)=>[...prevMessages, ...newMessages])\r\n        })\r\n    },[])\r\n\r\n    return (\r\n        <div style={{height:'500px', overflowY:'auto'}}>\r\n            {messages.map((m, index) => <Message key={index} message={m}/>)}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Message = ({message}) => {\r\n  \r\n    return (\r\n        <div>\r\n            <img src={message.photo} /> <b>{message.userName}</b>\r\n            <br />\r\n            {message.message}\r\n            <hr />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Messages","import React from 'react';\r\nimport AddMessage from './AddMessage/AddMessage';\r\nimport Messages from './Messages/Messages';\r\n\r\nconst Chat = () => {\r\n    const webSocketChannel = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n\r\n    return (\r\n        <div>\r\n            <Messages webSocketChannel={webSocketChannel}/>\r\n            <AddMessage webSocketChannel={webSocketChannel}/>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Chat","import React from 'react';\nimport './App.css';\nimport 'antd/dist/antd.css';\nimport Nav from './components/Nav/Nav';\nimport {Route, withRouter} from 'react-router-dom';\nimport News from './components/News/News';\nimport Music from './components/Music/Music';\nimport Settings from './components/Settings/Settings';\nimport DialogsContainer from './components/Dialogs/DialogsContainer';\nimport UsersContainer from './components/Users/UsersContainer';\nimport ProfileContainer from './components/Profile/ProfileContainer';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport Login from './components/login/login';\nimport { initializeApp } from './redux/app-reducer';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport Preloader from './components/common/preloader/preloader';\nimport { NavLink } from 'react-router-dom';\nimport Chat from './components/Chat/Chat';\n\nimport { Layout, Menu, Breadcrumb,Avatar, Row, Col } from 'antd';\nimport { UserOutlined, LaptopOutlined, NotificationOutlined } from '@ant-design/icons';\nconst { SubMenu } = Menu;\nconst { Header, Content, Footer, Sider } = Layout;\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.initializeApp()\n  }\n  render() {\n    if(!this.props.initializated) {\n      return <Preloader/>\n    }\n    \n    return (\n      <Layout>\n        <HeaderContainer />\n        <Content style={{ padding: '0 50px' }}>\n          <Breadcrumb style={{ margin: '16px 0' }}>\n            <Breadcrumb.Item>Home</Breadcrumb.Item>\n          </Breadcrumb>\n          <Layout className=\"site-layout-background\" style={{ padding: '24px 0' }}>\n            <Sider className=\"site-layout-background\" width={200}>\n              <Menu\n                mode=\"inline\"\n                defaultSelectedKeys={['2']}\n                defaultOpenKeys={['sub1']}\n                style={{ height: '100%' }}\n              >\n                <SubMenu key=\"sub1\" icon={<UserOutlined />} title=\"My profile\">\n                  <Menu.Item key=\"1\"><NavLink to='/profile'>Profile</NavLink></Menu.Item>\n                  <Menu.Item key=\"2\"><NavLink to='/dialogs'>Masseges</NavLink></Menu.Item>\n                </SubMenu>\n                <SubMenu key=\"sub2\" icon={<UserOutlined />} title=\"Users\">\n                  <Menu.Item key=\"3\"><NavLink to='/users'>Users</NavLink></Menu.Item>\n                  <Menu.Item key=\"4\"><NavLink to='/chat'>Chat</NavLink></Menu.Item>\n                </SubMenu>\n                <SubMenu key=\"sub3\" icon={<LaptopOutlined />} title=\"subnav\">\n                  <Menu.Item key=\"5\"><NavLink to='/news'>News</NavLink></Menu.Item>\n                  <Menu.Item key=\"6\"><NavLink to='/music'>Music</NavLink></Menu.Item>\n                  <Menu.Item key=\"7\"><NavLink to='/settings'>Settings</NavLink></Menu.Item>\n                </SubMenu>\n              </Menu>\n            </Sider>\n            <Content style={{ padding: '0 24px', minHeight: 280 }}>\n\n              <Route path='/profile/:userId?' render={() => <ProfileContainer />} />\n              <Route path='/dialogs' render={() => <DialogsContainer />} />\n              <Route path='/users' render={() => <UsersContainer />} />\n              <Route path='/news' render={() => <News />} />\n              <Route path='/music' render={() => <Music />} />\n              <Route path='/settings' render={() => <Settings />} />\n              <Route path='/login' render={() => <Login />} />\n              <Route path='/chat' render={() => <Chat />} />\n\n            </Content>\n          </Layout>\n        </Content>\n        <Footer style={{ textAlign: 'center' }}>demo-project</Footer>\n      </Layout>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  initializated: state.app.initializated\n})\n\nexport default compose(\n  withRouter,\n  connect(mapStateToProps, { initializeApp })\n)(App)\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {createStore, combineReducers, applyMiddleware} from 'redux'\r\nimport profileReducer from \"./profile-reducer\"\r\nimport dialogsReducer from \"./dialogs-reducer\"\r\nimport usersReducer from './users-reducer'\r\nimport authReducer from './auth-reducer'\r\nimport thunkMiddleware from 'redux-thunk'  \r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from './app-reducer'\r\n\r\n\r\nconst reducers = combineReducers({              \r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app:appReducer\r\n});\r\n\r\ntype reducerType = typeof reducers\r\nexport type AppStateType = ReturnType<reducerType>\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunkMiddleware))  \r\n\r\n\r\n// @ts-ignore\r\nwindow.store = store\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport store from './redux/redux-store';  \nimport {Provider} from 'react-redux';       \nimport { HashRouter } from 'react-router-dom';\n\n  ReactDOM.render(\n    <HashRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </HashRouter>,\n    document.getElementById('root')\n  );\n\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__1slVo\",\"dialogsItems\":\"Dialogs_dialogsItems__1BfSL\",\"active\":\"Dialogs_active__3vSWf\",\"dialog\":\"Dialogs_dialog__RBKuy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FormsControl_error__1hDmw\",\"formSummaryError\":\"FormsControl_formSummaryError__3vDGJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Nav_nav__j7Chi\",\"item\":\"Nav_item__2PX-r\",\"gold\":\"Nav_gold__28BN5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"discriptionBlock\":\"ProfileInfo_discriptionBlock__2_qjK\",\"mainPhoto\":\"ProfileInfo_mainPhoto__3IZob\",\"contact\":\"ProfileInfo_contact__2HjQr\"};"],"sourceRoot":""}